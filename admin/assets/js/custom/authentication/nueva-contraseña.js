"use strict";var KTAuthNewPassword=function(){var t,e,n,r,a=function(){return 100===r.getScore()};return{init:function(){t=document.querySelector("#kt_new_password_form"),e=document.querySelector("#kt_new_password_submit"),r=KTPasswordMeter.getInstance(t.querySelector('[data-kt-password-meter="true"]')),n=FormValidation.formValidation(t,{fields:{password:{validators:{notEmpty:{message:"La contraseña es necesaria"},callback:{message:"Por favor ingrese una contraseña válida",callback:function(t){if(t.value.length>0)return a()}}}},"confirm-password":{validators:{notEmpty:{message:"La confirmación de contraseña es válida"},identical:{compare:function(){return t.querySelector('[name="password"]').value},message:"Ambas contraseñas no coinciden"}}},tyc:{validators:{notEmpty:{message:"Debes aceptar los términos y condiciones"}}}},plugins:{trigger:new FormValidation.plugins.Trigger({event:{password:!1}}),bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row"})}}),e.addEventListener("click",(function(a){a.preventDefault(),n.revalidateField("password"),n.validate().then((function(a){if("Valid"==a){e.setAttribute("data-kt-indicator","on"),e.disabled=!0;let a=new FormData(t);fetch("includes/authentication/modelo-authentication.php",{method:"POST",body:a}).then((t=>t.json())).then((a=>{"nuevopassok"==a.resultado?Swal.fire({text:"Restableciste exitósamente tu contraseña",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){if(e.isConfirmed){t.querySelector('[name="password"]').value="",t.querySelector('[name="confirm-password"]').value="",r.reset();var a=t.getAttribute("data-kt-redirect-url");n.resetForm(),location.href=a}})):(Swal.fire({text:"Lo siento, al parecer hubo un error, intente nuevamente.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}),n.resetForm()),e.removeAttribute("data-kt-indicator"),e.disabled=!1}))}else Swal.fire({text:"Lo siento, al parecer hubo un error, intente nuevamente.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}),n.resetForm()}))})),t.querySelector('input[name="password"]').addEventListener("input",(function(){this.value.length>0&&n.updateFieldStatus("password","NotValidated")}))}}}();KTUtil.onDOMContentLoaded((function(){KTAuthNewPassword.init()}));