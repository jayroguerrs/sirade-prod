"use strict";var KTSigninGeneral=function(){var t,e,n;return{init:function(){t=document.querySelector("#kt_sign_in_form"),e=document.querySelector("#kt_sign_in_submit"),n=FormValidation.formValidation(t,{fields:{username:{validators:{notEmpty:{message:"El usuario es obligatorio"},stringLength:{min:8,max:20,message:"El usuario debe tener entre 8 y 20 caracteres"}}},password:{validators:{notEmpty:{message:"La contrase침a es obligatorio"},stringLength:{min:8,max:20,message:"La contrase침a debe tener entre 8 y 20 caracteres"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row"})}}),e.addEventListener("click",(function(o){o.preventDefault(),n.validate().then((function(o){if("Valid"==o){e.setAttribute("data-kt-indicator","on"),e.disabled=!0;let o=new FormData(t);fetch(`${window.host}/API/auth/sign-in`,{method:"POST",body:o}).then((t=>t.json())).then((o=>{1===o.estado||2===o.estado?Swal.fire({text:"Bienvenido(a): "+o.data.nombres,icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){e.isConfirmed&&(t.querySelector('[name="username"]').value="",t.querySelector('[name="password"]').value="",n.resetForm()),location.reload()})):(Swal.fire({text:"Lo siento,usuario o contrase침a inv치lido",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}),n.resetForm()),t.reset(),e.removeAttribute("data-kt-indicator"),e.disabled=!1}))}}))}))}}}();KTUtil.onDOMContentLoaded((function(){KTSigninGeneral.init()}));