"use strict";var KTPersonalList=function(){var e,t=()=>{document.querySelectorAll('[data-kt-customer-table-filter="delete_row"]').forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();const n=t.target.closest("tr"),a=n.querySelectorAll("td")[1].innerText,r=n.querySelectorAll("td")[1].querySelectorAll("div")[2].children("span").text();console.log(r),Swal.fire({text:"¿Está seguro que desea eliminar el registro: "+a+"?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,confirmButtonText:"Yes, eliminar",cancelButtonText:"No, cancelar",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then((function(t){t.value&&Swal.fire({text:"Eliminando "+a,icon:"info",buttonsStyling:!1,showConfirmButton:!1,timer:2e3}).then((function(){Swal.fire({text:"Se acaba de eliminar el registro: "+a+".",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, entendido",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then((function(){e.draw()}))}))}))}))}))},n=function(){const t=document.querySelector("#tb_personal"),n=t.querySelectorAll('[type="checkbox"]'),r=document.querySelector('[data-kt-customer-table-select="delete_selected"]');n.forEach((e=>{e.addEventListener("click",(function(){setTimeout((function(){a()}),50)}))})),r.addEventListener("click",(function(){Swal.fire({text:"¿Está seguro que desea eliminar el personal?",icon:"warning",showCancelButton:!0,buttonsStyling:!1,showLoaderOnConfirm:!0,confirmButtonText:"Si, eliminar",cancelButtonText:"No, cancelar",customClass:{confirmButton:"btn fw-bold btn-danger",cancelButton:"btn fw-bold btn-active-light-primary"}}).then((function(n){n.value?Swal.fire({text:"Eliminando personal seleccionado",icon:"info",buttonsStyling:!1,showConfirmButton:!1,timer:2e3}).then((function(){Swal.fire({text:"El personal ha sido eliminado con éxito",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, entendido",customClass:{confirmButton:"btn fw-bold btn-primary"}}).then((function(){e.draw()}));t.querySelectorAll('[type="checkbox"]')[0].checked=!1})):"cancel"===n.dismiss&&Swal.fire({text:"Selected customers was not deleted.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn fw-bold btn-primary"}})}))}))},a=function(){const e=document.querySelector("#tb_personal"),t=document.querySelector('[data-kt-customer-table-toolbar="base"]'),n=document.querySelector('[data-kt-customer-table-toolbar="selected"]'),a=document.querySelector('[data-kt-customer-table-select="selected_count"]'),r=e.querySelectorAll('tbody [type="checkbox"]');let l=!1,s=0;r.forEach((e=>{e.checked&&(l=!0,s++)})),l?(a.innerHTML=s,t.classList.add("d-none"),n.classList.remove("d-none")):(t.classList.remove("d-none"),n.classList.add("d-none"))};return{init:function(){e=$("#tb_personal").DataTable({searchDelay:500,processing:!0,serverSide:!0,order:[[3,"asc"]],stateSave:!1,select:{style:"multi",selector:'td:first-child input[type="checkbox"]',className:"row-selected"},ajax:{type:"POST",url:"apps/julia/page/personal/lista/lista-personal.model.php"},columnDefs:[{targets:0,visible:!0,orderable:!1,render:function(e){return`\n                          <div class="form-check form-check-sm form-check-custom form-check-solid">\n                              <input class="form-check-input" type="checkbox" value="${e}" />\n                          </div>`}},{targets:1,visible:!1},{targets:2,visible:!1},{targets:3,visible:!0,className:"d-flex align-items-center",render:function(e,t,n){var a=n[10];if("blank.png"!=a)var r='<div class=symbol-label><img src="assets/media/avatars/'+a+'" alt="Avatar" class="w-100"></div>';else{var l=["success","danger","warning","info","dark","primary","secondary"][Math.floor(6*Math.random())],s=e.match(/\b\w/g)||[];r='<div class="symbol-label fs-3 bg-light-'+l+" text-"+l+'">'+(s=((s.shift()||"")+(s.pop()||"")).toUpperCase())+"</div>"}return`                        \n                      \x3c!--begin:: Avatar --\x3e\n                      <div class="symbol symbol-circle symbol-50px overflow-hidden me-3">\n                        <a href="/good/apps/user-management/users/view.html">\n                            ${r}\n                        </a>\n                      </div>\n                      \x3c!--end::Avatar--\x3e\n\n                      \x3c!--begin::User details--\x3e\n                      <div class="d-flex flex-column">\n                        <a href="#!" class="text-gray-800 text-hover-primary mb-1" data-bs-toggle="tooltip" title="Haga click aquí para cerrar su sesión">${e}</a>\n                        <span>${n[1]} | ${n[4]}</span>\n                      </div>\n                      \x3c!--end::User details--\x3e                        \n                    `}},{targets:4,visible:!1},{targets:5,visible:!1,orderable:!0,className:"d-flex align-items-center",render:function(e,t,n){return`\n                      \x3c!--begin::User details--\x3e\n                      <div class="d-flex flex-column">\n                        <a class="fs-7 text-gray-800 mb-1">${e}</a>\n                        <span class="fs-8">${n[4]}</span>\n                      </div>\n                      \x3c!--end::User details--\x3e\n                    `}},{targets:6,visible:!1},{targets:7,visible:!0,render:function(e,t,n){return`                        \n                      \x3c!--begin::Flag--\x3e\n                      <img src="assets/media/flags/${n[8]}" class="w-25px me-3" style="width: 20px;border-radius: 4px" alt="" />\n                      \x3c!--end::Flag--\x3e\n                      <a class="text-dark fw-bold text-hover-primary fs-6">${e}</a>                      \n                    `}},{targets:8,visible:!1},{targets:9,visible:!0},{targets:10,visible:!1},{targets:11,visible:!0,render:function(e,t,n){return`\n                      <div class="badge badge-light-${n[12]} fw-bold">${e}</div>\n                    `}},{targets:12,visible:!1},{targets:-1,visible:!0,data:null,orderable:!1,className:"text-end",render:function(e,t,n){return`\n                      <a href="#" class="btn btn-light btn-active-light-primary btn-sm" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end">                                \n                        <span class="svg-icon svg-icon-5 m-0">\n                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">\n                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                                  <polygon points="0 0 24 0 24 24 0 24"></polygon>\n                                  <path d="M6.70710678,15.7071068 C6.31658249,16.0976311 5.68341751,16.0976311 5.29289322,15.7071068 C4.90236893,15.3165825 4.90236893,14.6834175 5.29289322,14.2928932 L11.2928932,8.29289322 C11.6714722,7.91431428 12.2810586,7.90106866 12.6757246,8.26284586 L18.6757246,13.7628459 C19.0828436,14.1360383 19.1103465,14.7686056 18.7371541,15.1757246 C18.3639617,15.5828436 17.7313944,15.6103465 17.3242754,15.2371541 L12.0300757,10.3841378 L6.70710678,15.7071068 Z" fill="currentColor" fill-rule="nonzero" transform="translate(12.000003, 11.999999) rotate(-180.000000) translate(-12.000003, -11.999999)"></path>\n                                </g>\n                            </svg>\n                        </span>\n                      </a>\n                      \x3c!--begin::Menu--\x3e\n                      <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold fs-7 w-125px py-4" data-kt-menu="true">\n                        \x3c!--begin::Menu item--\x3e\n                        <div class="menu-item px-3">\n                          <a href="?app=julia&page=editar-personal&id=${n[0]}" class="menu-link px-3" data-kt-customer-table-filter="edit_row">\n                            Editar\n                          </a>\n                        </div>\n                        \x3c!--end::Menu item--\x3e\n\n                        \x3c!--begin::Menu item--\x3e\n                        <div class="menu-item px-3">\n                          <a href="#" class="menu-link px-3" data-kt-customer-table-filter="delete_row">\n                            Eliminar\n                          </a>\n                        </div>\n                        \x3c!--end::Menu item--\x3e\n                      </div>\n                      \x3c!--end::Menu--\x3e\n                    `}}],createdRow:function(e,t,n){$(e).find("td:eq(4)").attr("data-filter",t.CreditCardType)}}),e.$,e.on("draw",(function(){n(),a(),t(),KTMenu.createInstances()})),document.querySelector('[data-kt-customer-table-filter="search"]').addEventListener("keyup",(function(t){e.search(t.target.value).draw()})),n(),(()=>{document.querySelectorAll('[data-kt-customer-table-filter="payment_type"] [name="payment_type"]');const e=document.querySelector('[data-kt-customer-table-filter="filter"]');e.addEventListener("click",(function(){const t=document.querySelector("#kt_personal_filtro_form"),n=(t.querySelector('[data-kt-user-table-filter="filter"]'),t.querySelectorAll("select"));e.addEventListener("click",(function(){var e="";n.forEach(((t,n)=>{t.value&&""!==t.value&&(0!==n&&(e+=" "),e+=t.value)})),datatable.search(e).draw()}))}))})(),t(),document.querySelector('[data-kt-customer-table-filter="reset"]').addEventListener("click",(function(){e.search("").draw()}))}}}();KTUtil.onDOMContentLoaded((function(){KTPersonalList.init()}));