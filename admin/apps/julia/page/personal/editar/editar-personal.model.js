"use strict";var KTEditarPersonal={init:function(){$("[name='fechanac']").flatpickr({dateFormat:"d/m/Y"}),$(".select-iconos").select2({templateSelection:optionFormat,templateResult:optionFormat}),(()=>{let e;const t=document.getElementById("personal_form"),a=document.getElementById("personal_submit");e=FormValidation.formValidation(t,{fields:{product_name:{validators:{notEmpty:{message:"Product name is required"}}},sku:{validators:{notEmpty:{message:"SKU is required"}}},sku:{validators:{notEmpty:{message:"Product barcode is required"}}},shelf:{validators:{notEmpty:{message:"Shelf quantity is required"}}},price:{validators:{notEmpty:{message:"Product base price is required"}}},tax:{validators:{notEmpty:{message:"Product tax class is required"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),a.addEventListener("click",(r=>{r.preventDefault(),e&&e.validate().then((function(e){"Valid"==e?(a.setAttribute("data-kt-indicator","on"),a.disabled=!0,setTimeout((function(){a.removeAttribute("data-kt-indicator"),Swal.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}}).then((function(e){e.isConfirmed&&(a.disabled=!1,window.location=t.getAttribute("data-kt-redirect"))}))}),2e3)):Swal.fire({html:"Sorry, looks like there are some errors detected, please try again. <br/><br/>Please note that there may be errors in the <strong>General</strong> or <strong>Advanced</strong> tabs",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",customClass:{confirmButton:"btn btn-primary"}})}))}))})(),CargarDatos()}};KTUtil.onDOMContentLoaded((function(){KTEditarPersonal.init()}));var optionFormat=function(e){if(!e.id)return e.text;var t=document.createElement("span"),a="";return a+='<img src="'+e.element.getAttribute("data-kt-select2-pais")+'" class="rounded-circle h-20px me-2" alt="image"/>',a+=e.text,t.innerHTML=a,$(t)};function CargarDatos(){var e=document.querySelector("input[name='hd_id']").value,t=new FormData;t.append("id",e),t.append("registro","editar-personal"),fetch("apps/julia/page/personal/editar/editar-personal.model.php",{method:"POST",body:t}).then((e=>e.json())).then((e=>{if("editar-ok"==e.resultado){document.querySelector("input[name='hd_id']").value=e.NCOLA_ID,document.querySelector("input[name='sh_cod']").value=e.CCOLA_CODIGO,document.querySelector("input[name='sh_doc']").value=e.CCOLA_DOCUMENTO,document.querySelector("input[name='sh_nombre']").value=e.CCOLA_NOMBRES,$("[name='sh_ocupacion']").val(e.NCOLA_OCUPACION).trigger("change.select2"),$("[name='sh_desempenio']").val(e.NCOLA_DESEMPENIO).trigger("change.select2"),document.querySelector("#sh_img").style.backgroundImage="url('assets/media/avatars/"+e.CCOLA_IMG+"')",$("[name='sh_estado_col']").val(e.NCOLA_ESTADO_COL).trigger("select2:select"),$("[name='sh_nacionalidad']").val(e.NCOLA_NACIONALIDAD).trigger("change.select2"),document.querySelector("input[name='sh_correo']").value=e.CCOLA_CORREO;var t=document.querySelector("#color_estado");console.log(t),t.classList.remove(t.classList[3]),t.classList.add(e.eclase)}else LimpiarForm(),Swal.fire({text:"Lo siento,usuario o contraseña inválido",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, gracias",customClass:{confirmButton:"btn btn-primary"}}),validator.resetForm();submitButton.removeAttribute("data-kt-indicator"),submitButton.disabled=!1}))}function LimpiarForm(){for(var e=document.getElementById("personal_form"),t=e.querySelectorAll(".form-select"),a=0;a<t.length;a++){var r=t[a];$(r).val(null).trigger("change")}e.reset()}$("[name='sh_estado_col").on("select2:select",(function(e){var t=e.params.data.element.getAttribute("data-kt-clase"),a=document.querySelector("#color_estado");a.classList.remove(a.classList[3]),a.classList.add(t)}));